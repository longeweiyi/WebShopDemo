webpackJsonp([1],{"8cFf":function(t,a){},"8zPW":function(t,a){},"9D/I":function(t,a){},"B+gR":function(t,a){},KTtH:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={};e.d(s,"pay",function(){return X}),e.d(s,"pay_chk",function(){return Z}),e.d(s,"payInfo",function(){return J});var n={};e.d(n,"payInit",function(){return et}),e.d(n,"payChk",function(){return st});var r=e("7+uW"),c=e("Dd8w"),i=e.n(c),o=e("NYxO"),d={computed:i()({},Object(o.c)(["cart"]))},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"header"}},[e("nav",{staticClass:"navbar navbar-default navbar-static-top"},[e("div",{staticClass:"container"},[e("div",{staticClass:"navbar-header"},[e("a",{staticClass:"navbar-brand",attrs:{href:""},on:{click:function(a){a.preventDefault(),t.jump("/")}}},[t._v("XX电子商城")])]),t._v(" "),e("div",{staticClass:"collapse navbar-collapse"},[e("ul",{staticClass:"nav navbar-nav navbar-right"},[e("li",{staticClass:"cartLi"},[e("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),t.jump("/cart")}}},[e("span",{staticClass:"glyphicon glyphicon-shopping-cart"}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.cart.length,expression:"cart.length"}],staticClass:"badge bg-danger cartNum"},[t._v(t._s(t.cart.length))])])])])])])])])},staticRenderFns:[]};var u=e("VU/8")(d,l,!1,function(t){e("pIQr")},"data-v-6b0d90b0",null).exports,p={methods:i()({},Object(o.b)(["cartInit","addressInit","payInit"])),components:{VHeader:u},created:function(){this.cartInit(),this.addressInit(),this.payInit()}},_={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-header"),this._v(" "),a("router-view")],1)},staticRenderFns:[]};var v=e("VU/8")(p,_,!1,function(t){e("8zPW")},null,null).exports,f=e("/ocq"),m={props:{product:{required:!0,type:Object},num:{type:Number}},methods:i()({},Object(o.b)(["cartAdd"]),{cartAdd_2:function(){var t=this;this.cartAdd({product:t.product,num:t.num,success:function(){t.$dialog.confirm("已加入购物车",{okText:"查看购物车",cancelText:"继续浏览"}).then(function(){t.jump("/cart")}).catch(function(){}),t.$emit("success")}})}})},h={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn btn-danger",on:{click:this.cartAdd_2}},[this._v("+ 加入购物车")])},staticRenderFns:[]},C=e("VU/8")(m,h,!1,null,null,null).exports,g={data:function(){return{products:[],priceArea:[null,{end:1e3},{start:1e3,end:2e3},{start:2e3,end:3e3},{start:3e3}],priceArea_chk:null,sort_order:[{text:"默认",val:null},{text:"价格正序",val:"price_ascd"},{text:"价格倒序",val:"price_desc"}],sort_order_chk:null,page:1,busy:!0,can_loadMore:!0}},computed:{productsList:function(){var t=this,a=[],e=this.priceArea_chk;return a=e?this.products.filter(function(t){if(e.start&&e.end){if(t.price>=e.start&&t.price<=e.end)return!0}else if(e.start){if(t.price>=e.start)return!0}else if(e.end&&t.price<=e.end)return!0}):this.products.slice(0),this.sort_order_chk&&a.sort(function(a,e){return"price_ascd"==t.sort_order_chk?a.price-e.price:"price_desc"==t.sort_order_chk?e.price-a.price:void 0}),a}},methods:{priceAreaText:function(t){var a="全部";return t&&(t.start&&t.end?a=t.start+" ～ "+t.end:t.start?a="大于等于"+t.start:t.end&&(a="小于等于"+t.end)),a},setData:function(){var t=this;console.log("page",this.page),this.can_loadMore&&(this.can_loadMore=!1,axios.get("/api/products?page="+this.page).then(function(a){console.log("#####"),a.status&&(t.products=t.products.concat(a.data.data),t.page<=1&&(t.busy=!1),t.page++,t.page>5&&(t.busy=!0)),t.can_loadMore=!0}).catch(function(a){console.log("index_err",a),t.can_loadMore=!0}))}},components:{v_cart_add:C},created:function(){this.setData()}},b={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("form",{staticClass:"form-inline",attrs:{action:""}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:""}},[t._v("价格区间")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.priceArea_chk,expression:"priceArea_chk"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.priceArea_chk=a.target.multiple?e:e[0]}}},t._l(t.priceArea,function(a,s){return e("option",{key:s,domProps:{value:a}},[t._v(t._s(t.priceAreaText(a)))])}))]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label",attrs:{for:""}},[t._v("价格区间")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sort_order_chk,expression:"sort_order_chk"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sort_order_chk=a.target.multiple?e:e[0]}}},t._l(t.sort_order,function(a){return e("option",{domProps:{value:a.val}},[t._v(t._s(a.text))])}))])]),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.setData,expression:"setData"}],staticClass:"row products",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},t._l(t.productsList,function(a,s){return e("div",{key:s,staticClass:"col-xs-3"},[e("div",{staticClass:"pro"},[e("div",{staticClass:"pro-media"},[e("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.jump("/product/"+a.id)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"static/images/products/"+a.img,expression:"'static/images/products/'+pro.img"}],attrs:{alt:""}})])]),t._v(" "),e("div",{staticClass:"pro-body"},[e("div",{staticClass:"pro-title",attrs:{title:a.title}},[t._v(t._s(a.title))]),t._v(" "),e("div",{staticClass:"pro-price clearfix"},[e("span",{staticClass:"pull-left"},[t._v("¥"+t._s(a.price))]),t._v(" "),e("v_cart_add",{staticClass:"btn-xs pull-right",attrs:{product:a}})],1)])])])})),t._v(" "),t.busy?e("div",{staticClass:"loadAll"},[t._v("已加载全部")]):e("div",{staticClass:"loadMore"})])},staticRenderFns:[]};var k=e("VU/8")(g,b,!1,function(t){e("dj1p")},"data-v-064fb722",null).exports,y={props:{product:{required:!0,type:Object}},methods:i()({},Object(o.b)(["cartAdd","cartDelNum","cartSetNum"]),{cartSetNum_2:function(t){this.cartSetNum({product:this.product,cart_num:t.target.value,complete:function(){t.target.blur()}})},blur:function(t){t.target.value!=this.product.cart_num&&(t.target.value=this.product.cart_num)}})},x={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-group cart_btn"},[e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){a.preventDefault(),t.cartDelNum(t.product)}}},[t._v("-")])]),t._v(" "),e("input",{staticClass:"form-control text-center",attrs:{type:"text"},domProps:{value:t.product.cart_num},on:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.cartSetNum_2(a):null},blur:t.blur}}),t._v(" "),e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){a.preventDefault(),t.cartAdd({product:t.product})}}},[t._v("+")])])])},staticRenderFns:[]};var D=e("VU/8")(y,x,!1,function(t){e("B+gR")},"data-v-58b374a1",null).exports,A={computed:i()({},Object(o.c)(["cart","cart_chk","cartInfo"])),methods:i()({},Object(o.b)(["cartDel","cartChk","cartChkAll"]),{cartDel_2:function(t){confirm("确定删除该商品？")&&this.cartDel([t])},cartDel_3:function(){0!=this.cart_chk.length?confirm("确定删除所选商品？")&&this.cartDel(this.cart_chk):alert("请选择商品")},buy:function(){0!=this.cart_chk.length?this.jump("/order_create"):alert("请选择商品")}}),components:{v_cart_btn:D}},j={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[t.cart.length?e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.cart,function(a,s){return e("tr",{key:s},[e("td",[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.cartInfo.chIsStr.indexOf(","+a.id+",")>-1},on:{click:function(e){e.preventDefault(),t.cartChk(a.id)}}})]),t._v(" "),e("td",[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[e("img",{staticClass:"media-object img",attrs:{src:"static/images/products/"+a.img}})]),t._v(" "),e("div",{staticClass:"media-body"},[e("h4",{staticClass:"media-heading"},[t._v(t._s(a.title))])])])]),t._v(" "),e("td",[t._v("\n                    "+t._s(t._f("currency")(a.price,""))+"\n                ")]),t._v(" "),e("td",[e("v_cart_btn",{attrs:{product:a}})],1),t._v(" "),e("td",[t._v("\n                    "+t._s(t._f("currency")(a.cart_num*a.price,""))+"\n                ")]),t._v(" "),e("td",[e("span",{staticClass:"glyphicon glyphicon-trash del",on:{click:function(e){t.cartDel_2(a.id)}}})])])})),t._v(" "),e("tfoot",[e("tr",[e("td",[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.cart.length==t.cart_chk.length},on:{click:function(a){a.preventDefault(),t.cartChkAll(!t.cart.length==t.cart_chk.length)}}})]),t._v(" "),e("td",[e("a",{staticClass:"text-danger",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.cartDel_3(a)}}},[t._v("删除所选")])]),t._v(" "),e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("\n                    总计：\n                    "),e("span",{staticClass:"total"},[t._v("\n                        ¥ "),e("span",{staticClass:"totalPrice"},[t._v(t._s(t._f("currency")(t.cartInfo.chk_price,"")))])]),t._v("\n                    元  \n                    "),e("button",{class:["btn","btn-primary",{disabled:0==this.cart_chk.length}],on:{click:t.buy}},[t._v("确定购买")])])])])]):e("p",[t._v("\n        您的购物车是空的，"),e("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),t.jump("/")}}},[t._v("赶快去逛逛！")])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"3%"}},[t._v(" ")]),t._v(" "),e("th",{attrs:{width:"45%"}},[t._v("商品")]),t._v(" "),e("th",{attrs:{width:"10%"}},[t._v("单价（元）")]),t._v(" "),e("th",{attrs:{width:"22%"}},[t._v("数量")]),t._v(" "),e("th",{attrs:{width:"12%"}},[t._v("小计（元）")]),t._v(" "),e("th",{attrs:{width:"8%"}},[t._v("操作")])])])}]};var E=e("VU/8")(A,j,!1,function(t){e("KTtH")},"data-v-2c1b6810",null).exports,T={props:{address:{required:!0,type:Object}},computed:i()({},Object(o.c)(["address_chk"])),methods:i()({},Object(o.b)(["addressChk","addressSetDefault","addressDel"]),{addressDel_2:function(){confirm("您确定要删除该地址吗？")&&this.addressDel(this.address.id)}})},S={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:["address_box",{active:t.address.id==t.address_chk}],on:{click:function(a){t.addressChk(t.address.id)}}},[e("div",{staticClass:"address_body"},[e("div",{staticClass:"adrUer"},[t._v(t._s(t.address.username))]),t._v(" "),e("div",{staticClass:"adr",attrs:{title:""}},[t._v(t._s(t.address.address))]),t._v(" "),e("div",{staticClass:"adrTel"},[t._v("tel "+t._s(t.address.tel))])]),t._v(" "),e("div",{staticClass:"address_footer clearfix"},[t.address.is_default?e("span",{staticClass:"label label-success pull-left"},[t._v("默认地址")]):e("span",{staticClass:"label label-warning pull-left",on:{click:function(a){t.addressSetDefault(t.address.id)}}},[t._v("设为默认")]),t._v(" "),e("span",{staticClass:"glyphicon glyphicon-trash pull-right adrDel",on:{click:function(a){return a.stopPropagation(),t.addressDel_2(a)}}})])])},staticRenderFns:[]};var I=e("VU/8")(T,S,!1,function(t){e("d0hU")},"data-v-e532406c",null).exports,R={props:{pay:{required:!0,type:Object}},computed:i()({},Object(o.c)(["pay_chk"])),methods:i()({},Object(o.b)(["payChk"]))},$={render:function(){var t=this,a=t.$createElement;return(t._self._c||a)("div",{class:["pay_box",{active:t.pay_chk==t.pay.id}],on:{click:function(a){t.payChk(t.pay.id)}}},[t._v("\n    "+t._s(t.pay.text)+"\n")])},staticRenderFns:[]};var w=e("VU/8")(R,$,!1,function(t){e("zZlA")},"data-v-bdae3d9c",null).exports,N={data:function(){return{cartMustChk:!0,addresss_limit:3}},computed:i()({},Object(o.c)(["address","address_chk","pay","pay_chk"]),{addressList:function(){return-1==this.addresss_limit?this.address:this.address.slice(0,this.addresss_limit)}}),components:{v_address_box:I,v_pay_box:w},methods:{next:function(){var t=[];this.address_chk||t.push("请选择收货地址"),this.pay_chk||t.push("请选择支付方式"),t.length?alert(t.join("\n")):this.jump("/order_confirm")}}},O={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[t._m(0),t._v(" "),e("div",{staticClass:"row"},[t._l(t.addressList,function(t,a){return e("div",{key:a,staticClass:"col-xs-3"},[e("v_address_box",{attrs:{address:t}})],1)}),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("div",{staticClass:"address_box text-center"},[e("div",{staticClass:"address_body",on:{click:function(a){t.jump("/address_create")}}},[e("div",{staticClass:"addAddress"},[t._v("+")])]),t._v(" "),t._m(1)])])],2),t._v(" "),e("div",{staticClass:"text-center"},[-1==t.addresss_limit?e("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(a){t.addresss_limit=3}}},[t._v("\n            收起\n            "),e("span",{staticClass:"glyphicon glyphicon-menu-up"})]):e("button",{staticClass:"btn btn-primary btn-xs",on:{click:function(a){t.addresss_limit=-1}}},[t._v("\n            展开\n            "),e("span",{staticClass:"glyphicon glyphicon-menu-down"})])]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"row"},t._l(t.pay,function(t,a){return e("div",{key:a,staticClass:"col-xs-3"},[e("v_pay_box",{attrs:{pay:t}})],1)})),t._v(" "),e("div",{staticClass:"text-center btnBox"},[e("button",{staticClass:"btn btn-info btn-sm",on:{click:t.back}},[t._v("返回")]),t._v("\n            \n        "),e("button",{staticClass:"btn btn-primary",on:{click:t.next}},[t._v("下一步")])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",{staticClass:"addressTt"},[a("p",[this._v("收货地址")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"address_footer"},[a("small",[this._v("添加收货地址")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",{staticClass:"payTt"},[a("p",[this._v("支付方式")])])}]};var P=e("VU/8")(N,O,!1,function(t){e("9D/I")},"data-v-8a9492de",null).exports,U={data:function(){return{form:{username:"",address:"",tel:""},can_add:!0}},methods:i()({},Object(o.b)(["addressAdd"]),{add:function(){if(this.can_add){this.can_add=!1;var t=[],a=this.form.username.length;if((a<2||a>8)&&t.push("收货人由2-8个字符组成"),(this.form.address.length<10||a>100)&&t.push("收货人地址由10-100个字符组成"),/^[1][3,4,5,7,8][0-9]{9}$/.test(this.form.tel)||t.push("联系方式不合法"),t.length)alert(t.join("\n"));else{var e=this;this.addressAdd({address:this.form,success:function(){alert("添加成功！！！"),e.back()},complete:function(){e.can_add=!0}})}}}})},L={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("form",{staticClass:"form-horizontal",attrs:{action:""}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-xs-2",attrs:{for:""}},[t._v("\n                收货人\n            ")]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.username,expression:"form.username",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.username},on:{input:function(a){a.target.composing||t.$set(t.form,"username",a.target.value.trim())},blur:function(a){t.$forceUpdate()}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-xs-2",attrs:{for:""}},[t._v("\n                收货地址\n            ")]),t._v(" "),e("div",{staticClass:"col-xs-4"},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.address,expression:"form.address",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.form.address},on:{input:function(a){a.target.composing||t.$set(t.form,"address",a.target.value.trim())},blur:function(a){t.$forceUpdate()}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-xs-2",attrs:{for:""}},[t._v("\n                联系方式\n            ")]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.tel,expression:"form.tel",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.tel},on:{input:function(a){a.target.composing||t.$set(t.form,"tel",a.target.value.trim())},blur:function(a){t.$forceUpdate()}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("div",{staticClass:"col-xs-3 col-xs-offset-2"},[e("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"添加"},on:{click:t.add}}),t._v("\n                 \n                 \n                "),e("input",{staticClass:"btn btn-info btn-sm",attrs:{type:"button",value:"返回"},on:{click:t.back}})])])])])},staticRenderFns:[]},F=e("VU/8")(U,L,!1,null,null,null).exports,H={data:function(){return{cartMustChk:!0}},computed:i()({},Object(o.c)(["cartInfo","addressInfo","payInfo","cart_chk"])),methods:i()({},Object(o.b)(["cartDel"]),{pay:function(){var t=this;this.$dialog.alert("TODO:去支付",{okText:"支付成功"}).then(function(){t.cartDel(t.cart_chk),t.jump("/")})}})},M={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"panel panel-default"},[t._m(0),t._v(" "),e("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),e("tbody",t._l(t.cartInfo.chk,function(a,s){return e("tr",{key:s},[e("td",[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[e("img",{staticClass:"media-object img",attrs:{src:"static/images/products/"+a.img}})]),t._v(" "),e("div",{staticClass:"media-body"},[e("h4",{staticClass:"media-heading"},[t._v("\n                                    "+t._s(a.title)+"\n                                ")])])])]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.price,"")))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.cart_num,"")))]),t._v(" "),e("td",[t._v(t._s(t._f("currency")(a.price*a.cart_num,"")))])])}))]),t._v(" "),e("div",{staticClass:"panel-footer text-right"},[t._v("\n            总计：\n            "),e("span",{staticClass:"total"},[t._v("\n                ¥\n                "),e("span",{staticClass:"totalPrice"},[t._v(t._s(t._f("currency")(t.cartInfo.chk_price,"")))])]),t._v("\n            元\n        ")])]),t._v(" "),e("div",{staticClass:"panel panel-default"},[t._m(2),t._v(" "),e("ul",{staticClass:"list-group"},[e("li",{staticClass:"list-group-item"},[t._v("\n                收货人："+t._s(t.addressInfo.chk.username)+"\n            ")]),t._v(" "),e("li",{staticClass:"list-group-item"},[t._v("\n                收货地址："+t._s(t.addressInfo.chk.address)+"\n            ")]),t._v(" "),e("li",{staticClass:"list-group-item"},[t._v("\n                联系方式："+t._s(t.addressInfo.chk.tel)+"\n            ")])])]),t._v(" "),e("div",{staticClass:"panel panel-default"},[t._m(3),t._v(" "),e("div",{staticClass:"panel-body"},[t._v("\n            "+t._s(t.payInfo.chk.text)+"\n        ")]),t._v(" "),e("p",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-info btn-sm",on:{click:t.back}},[t._v("返回")]),t._v("\n                \n            "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.pay}},[t._v("确认订单")])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[this._v("购买商品")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{width:"40%"}},[this._v("商品")]),this._v(" "),a("th",[this._v("单价（元）")]),this._v(" "),a("th",[this._v("数量")]),this._v(" "),a("th",[this._v("小计（元）")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[this._v("收货地址")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[this._v("支付方式")])])}]};var V=e("VU/8")(H,M,!1,function(t){e("rO3P")},null,null).exports,B={data:function(){return{product:{},num:1}},created:function(){var t=this;axios.get("/api/product?id="+this.$route.params.id).then(function(a){a.data.status&&(t.product=a.data.data)}).catch(function(t){console.log("product_err",t)})},methods:i()({},Object(o.b)(["cartAdd","cartSetChk"]),{add_success:function(){this.num=1},buy:function(){var t=this;this.cartAdd({product:this.product,num:this.num,success:function(){t.cartSetChk([t.product.id]),t.jump("/order_create")}})}}),watch:{num:function(t,a){/^[1-9]\d*$/.test(t)||(this.num=a)}},components:{v_cart_add:C}},K={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4"},[e("img",{staticClass:"img",attrs:{src:"static/images/products/"+t.product.img,alt:""}})]),t._v(" "),e("div",{staticClass:"col-xs-8"},[e("ul",{staticClass:"list-unstyled productUl"},[e("li",[e("h3",[t._v(t._s(t.product.title))])]),t._v(" "),e("li",[t._v("\n                    价格：\n                    "),e("span",{staticClass:"total"},[t._v("\n                        ¥\n                        "),e("span",{staticClass:"totalPrice"},[t._v(t._s(t._f("currency")(t.product.price,"")))])])]),t._v(" "),e("li",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.num,expression:"num",modifiers:{number:!0}}],staticClass:"form-control sortText",attrs:{type:"number",min:"1",step:"1",max:t.product.kucun},domProps:{value:t.num},on:{input:function(a){a.target.composing||(t.num=t._n(a.target.value))},blur:function(a){t.$forceUpdate()}}})]),t._v(" "),e("li",[e("button",{staticClass:"btn btn-warning",on:{click:t.buy}},[t._v("立即购买")]),t._v("\n                        \n                    "),e("v_cart_add",{attrs:{product:t.product,num:t.num},on:{success:t.add_success}})],1)])])]),t._v(" "),e("div",{staticClass:"panel panel-default"},[t._m(0),t._v(" "),e("div",{staticClass:"panel-body"},t._l(t.product.attrs,function(a,s){return e("div",{key:s,staticClass:"col-xs-3 attrItem"},[t._v("\n                "+t._s(a.name)+"："+t._s(a.val)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"panel panel-default"},[t._m(1),t._v(" "),e("div",{staticClass:"panel-body desc",domProps:{innerHTML:t._s(t.product.desc)}})])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[this._v("商品属性")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[this._v("商品详情")])])}]};var Y=e("VU/8")(B,K,!1,function(t){e("a7Dh")},"data-v-7b83382c",null).exports;r.a.use(f.a);var z,W,q,G=new f.a({routes:[{path:"/",component:k},{path:"/cart",component:E},{path:"/order_create",component:P},{path:"/address_create",component:F},{path:"/order_confirm",component:V},{path:"/product/:id",component:Y}]}),X=function(t){return t.pay},Z=function(t){return t.pay_chk},J=function(t){var a={};return t.pay.forEach(function(e){e.id==t.pay_chk&&(a=e)}),{chk:a}},Q=e("bOdI"),tt=e.n(Q),at=(z={},tt()(z,"PAY_INIT",function(t,a){t.pay=a}),tt()(z,"PAY_CHK",function(t,a){t.pay_chk=a}),z),et=function(t){var a=t.commit;axios.get("/api/pay").then(function(t){t.data.status&&a("PAY_INIT",t.data.data)}).catch(function(t){console.log("pay_err",t)})},st=function(t,a){(0,t.commit)("PAY_CHK",a)},nt={cart:[],cart_chk:[]},rt=(W={},tt()(W,"CART_INIT",function(t,a){t.cart=a}),tt()(W,"CART_ADD",function(t,a){var e=a.product,s=a.num,n=t.cart.find(function(t){return t.id==e.id});n?n.cart_num+=s:((e=clone(e)).cart_num=s,t.cart.push(e))}),tt()(W,"CART_DEL_NUM",function(t,a){t.cart.find(function(t){return t.id==a.id}).cart_num--}),tt()(W,"CART_SET_NUM",function(t,a){var e=a.product,s=a.cart_num;t.cart.find(function(t){return t.id==e.id}).cart_num=s}),tt()(W,"CART_DEL",function(t,a){var e=","+a.join(",")+",",s=[];t.cart.forEach(function(t){-1==e.indexOf(","+t.id+",")&&s.push(t)}),t.cart=s,t.cart_chk=[]}),tt()(W,"CART_CHK",function(t,a){if((","+t.cart_chk.join(",")+",").indexOf(","+a+",")>-1)for(var e=0;e<t.cart_chk.length;e++)if(t.cart_chk[e]==a)return void t.cart_chk.splice(e,1);t.cart_chk.push(a)}),tt()(W,"CART_CHK_ALL",function(t,a){t.cart_chk=a?t.cart.map(function(t){return t.id}):[]}),tt()(W,"CART_SET_CHK",function(t,a){t.cart_chk=a}),W),ct={state:nt,getters:{cart:function(t){return t.cart},cart_chk:function(t){return t.cart_chk},cartInfo:function(t){var a=[],e=","+t.cart_chk.join(",")+",",s=0;return t.cart.forEach(function(t){e.indexOf(","+t.id+",")>-1&&(a.push(t),s+=t.price*t.cart_num)}),{chk:a,chk_price:s,chIsStr:e}}},mutations:rt,actions:{cartInit:function(t){var a=t.commit;axios.get("/api/cart").then(function(t){t.data.status&&a("CART_INIT",t.data.data)}).catch(function(t){console.log("cart_err",t)})},cartAdd:function(t,a){var e=t.commit;if(a.product.kucun){var s=nt.cart.find(function(t){return t.id==a.product.id});a.num=void 0==a.num?1:parseInt(a.num);var n=s?s.cart_num:0;a.num+n>a.product.kucun?alert("该商品库存不足"):setTimeout(function(){e("CART_ADD",a),a.success&&a.success()},100)}else alert("该商品库存不足")},cartDelNum:function(t,a){var e=t.commit;nt.cart.find(function(t){return t.id==a.id}).cart_num<=1||setTimeout(function(){e("CART_DEL_NUM",a)},100)},cartSetNum:function(t,a){var e=t.commit;isNaN(a.cart_num)?a.complete&&a.complete():(a.cart_num=parseInt(a.cart_num),a.cart_num<1&&(a.cart_num=1),a.cart_num>a.product.kucun&&(a.cart_num=a.product.kucun),setTimeout(function(){e("CART_SET_NUM",a),a.complete&&a.complete()},100))},cartDel:function(t,a){var e=t.commit;setTimeout(function(){e("CART_DEL",a)},100)},cartChk:function(t,a){(0,t.commit)("CART_CHK",a)},cartChkAll:function(t,a){(0,t.commit)("CART_CHK_ALL",a)},cartSetChk:function(t,a){(0,t.commit)("CART_SET_CHK",a)}}},it=e("mtWM"),ot=e.n(it),dt={state:{address:[],address_chk:0},getters:{address:function(t){return t.address},address_chk:function(t){return t.address_chk},addressInfo:function(t){var a={};return t.address.forEach(function(e){e.id==t.address_chk&&(a=e)}),{chk:a}}},mutations:(q={},tt()(q,"ADDRESS_INIT",function(t,a){for(var e=0;e<a.length;e++)if(1==a[e].is_default){var s;s=a.splice(e,1)[0],t.address_chk=s.id,a.unshift(s);break}t.address=a}),tt()(q,"ADDRESS_CHK",function(t,a){t.address_chk=a}),tt()(q,"ADDRESS_SET_DEFAULT",function(t,a){t.address.forEach(function(t){t.id==a?t.is_default=1:t.is_default=0})}),tt()(q,"ADDRESS_DEL",function(t,a){for(var e=0;e<t.address.length;++e)if(t.address[e].id==a){t.address.splice(e,1),t.address_chk==a&&(t.address_chk=0);break}}),tt()(q,"ADDRESS_ADD",function(t,a){t.address.push(clone(a.address))}),q),actions:{addressInit:function(t){var a=t.commit;ot.a.get("/api/address").then(function(t){t.data.status&&a("ADDRESS_INIT",t.data.data)}).catch(function(t){console.log("address_err",t)})},addressChk:function(t,a){(0,t.commit)("ADDRESS_CHK",a)},addressSetDefault:function(t,a){var e=t.commit;setTimeout(function(){e("ADDRESS_SET_DEFAULT",a)},100)},addressDel:function(t,a){(0,t.commit)("ADDRESS_DEL",a)},addressAdd:function(t,a){var e=t.commit,s=t.state;setTimeout(function(){a.address.id=s.address[s.address.length-1].id+1,a.address.is_default=0,e("ADDRESS_ADD",a),a.success&&a.success(),a.complete&&a.complete()},3e3)}}};r.a.use(o.a);var lt=new o.a.Store({state:{pay:[],pay_chk:0},getters:s,mutations:at,actions:n,modules:{cart:ct,address:dt}}),ut=e("bqTm"),pt=e.n(ut),_t=e("cTzj"),vt=e.n(_t),ft=e("7VfX"),mt=e.n(ft),ht=(e("8cFf"),/(\d{3})(?=\d)/g);window.axios=ot.a,r.a.use(pt.a),r.a.use(vt.a),r.a.use(mt.a),e("x6B4"),r.a.mixin({filters:{currency:function(t,a,e){if(t=parseFloat(t),!isFinite(t)||!t&&0!==t)return"";a=null!=a?a:"$",e=null!=e?e:2;var s=Math.abs(t).toFixed(e),n=e?s.slice(0,-1-e):s,r=n.length%3,c=r>0?n.slice(0,r)+(n.length>3?",":""):"",i=e?s.slice(-1-e):"";return(t<0?"-":"")+a+c+n.slice(r).replace(ht,"$1,")+i}},methods:{jump:function(t){this.$router.push(t)},back:function(){this.$router.go(-1)}},beforeRouteEnter:function(t,a,e){e(function(t){t.cartMustChk&&(t.$store.getters.cart_chk.length||(t.$router.replace("/"),console.log(t)))})}}),window.clone=function(t){var a={};for(var e in t)a[e]=t[e];return a},r.a.config.productionTip=!1,new r.a({el:"#app",router:G,store:lt,components:{App:v},template:"<App/>"})},V9W7:function(t,a){t.exports={status:!0,data:[{id:1,title:"Apple/苹果 iPhone X 全网通4G手机iphone10",img:"1.jpg",price:"1054",kucun:10},{id:2,title:"Apple/苹果 iPad平板电脑9.7英寸32G/128G air2升级版wif",img:"2.jpg",price:"2692",kucun:20},{id:3,title:"Apple/苹果 13英寸：MacBook Pro 128GB 轻薄 办公笔记本电脑",img:"3.jpg",price:"3888",kucun:30},{id:4,title:"Apple Watch Series3苹果智能手表 watch3运动手环通话手表",img:"4.jpg",price:"869",kucun:40},{id:5,title:"炫龙 毁灭者DC 游戏本独显15.6英寸高清手提办公笔记本电脑",img:"5.jpg",price:"1546",kucun:10},{id:6,title:"炫龙 阿尔法 Alpha办公电脑游戏主机税控电脑品牌机台式机整机",img:"6.jpg",price:"2752",kucun:20},{id:7,title:"TP-LINK双频无线路由器WIFI家用穿墙王光纤高速千兆tplink穿墙5G",img:"7.jpg",price:"3561",kucun:30},{id:8,title:"朗捷A5加厚本子皮质笔记本文具批发商务日记本手账本记事本",img:"8.jpg",price:"965",kucun:40},{id:9,title:"苏泊尔电火火锅锅家用多功能电热煮锅宿舍烧烤炒锅一体锅2-4-6人",img:"9.jpg",price:"1489",kucun:10},{id:10,title:"SUPOR/苏泊尔 CFXB40FC835-75电饭煲锅4L智能家用正品2-3-4-5-6人",img:"10.jpg",price:"2345",kucun:20},{id:11,title:"苏泊尔电饼铛家用双面加热烙饼锅煎饼机电饼档新款自动断电正品",img:"11.jpg",price:"3126",kucun:30},{id:12,title:"SUPOR/苏泊尔 CYSB50YCW10D-100电压力锅双胆5L高压6饭煲3正品4人",img:"12.jpg",price:"742",kucun:40},{id:13,title:"SUPOR/苏泊尔 DZ16YC812-35隔水电炖锅 白瓷BB煲汤锅迷你电炖盅",img:"13.jpg",price:"1649",kucun:10},{id:14,title:"Supor/苏泊尔 SDHCB148-210迷你电磁炉正品小型家用爆炒防水炉灶",img:"14.jpg",price:"2548",kucun:20},{id:15,title:"Haier/海尔 BCD-206STPA 206升三门冷藏家用节能小冰箱 软冷冻",img:"15.jpg",price:"3174",kucun:30},{id:16,title:"SUPOR/苏泊尔 JS39D-250榨汁机家用全自动果蔬多功能炸果汁料理机",img:"16.jpg",price:"841",kucun:40},{id:17,title:"Haier/海尔 LE40A31 40英寸高清智能网络平板液晶电视",img:"17.jpg",price:"1259",kucun:10},{id:18,title:"帝王蟹4.4-4.0斤智利进口鲜活熟冻海鲜水产大螃蟹帝皇长脚蟹包邮",img:"18.jpg",price:"2739",kucun:20},{id:19,title:"大龙虾鲜活海鲜水产加拿大波士顿龙虾进口奥龙澳洲包邮1-10斤/只",img:"19.jpg",price:"3542",kucun:30},{id:20,title:"巴彦尔内蒙古草原特产新鲜烤羊排烧烤羊肋排骨肉熟食4000g烤羊排熟",img:"20.jpg",price:"816",kucun:40}]}},YlUu:function(t,a){t.exports={status:!0,data:{id:1,title:"Apple/苹果 iPhone X 全网通4G手机iphone10",img:"1.jpg",price:"1054",kucun:10,attrs:[{name:"品牌",val:"Apple"},{name:"商品名称",val:"AppleiPhone"},{name:"商品编号",val:"5131287"},{name:"商品毛重",val:"435.00g"},{name:"商品产地",val:"中国"},{name:"系统",val:"苹果（IOS）"}],desc:"<img src='static/images/product/1/1.jpg' class='center-block'>"}}},a7Dh:function(t,a){},b246:function(t,a){t.exports={status:!0,data:[{id:1,username:"张三",address:"云南省丽江市丽江古城区",tel:"15888888888",is_default:0},{id:2,username:"李四",address:"亚龙湾国家旅游度假区，中国最南端的热带滨海旅游城市——三亚市东南28公里处",tel:"15888888888",is_default:1},{id:3,username:"王五",address:"安徽省黄山市黄山风景区",tel:"15888888888",is_default:0},{id:4,username:"赵六",address:"阿坝藏族羌族自治州九寨沟县",tel:"15888888888",is_default:0},{id:5,username:"小明",address:"桂林山水漓江叠彩山象山公园",tel:"15888888888",is_default:0},{id:6,username:"小红",address:"北京市延庆县军都山关沟古道北口",tel:"15888888888",is_default:0}]}},d0hU:function(t,a){},dj1p:function(t,a){},dt6b:function(t,a){t.exports={status:!0,data:[{id:1,text:"支付宝"},{id:2,text:"微信"},{id:3,text:"银行卡"}]}},gbLC:function(t,a){t.exports={status:!0,data:[{id:1,title:"Apple/苹果 iPhone X 全网通4G手机iphone10",img:"1.jpg",price:"1054",kucun:10,cart_num:1}]}},pIQr:function(t,a){},rO3P:function(t,a){},x6B4:function(t,a,e){const s=e("zNUS");s.mock(/^\/api\/products/,e("V9W7")),s.mock("/api/cart",e("gbLC")),s.mock("/api/address",e("b246")),s.mock("/api/pay",e("dt6b")),s.mock(/^\/api\/product/,e("YlUu"))},zZlA:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.53498beca8f2fada03e7.js.map